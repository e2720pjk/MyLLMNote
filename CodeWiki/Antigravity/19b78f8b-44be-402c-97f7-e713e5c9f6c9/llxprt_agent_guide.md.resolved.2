# LLxprt Agent Interface

## 1. Role & Responsibility

Adopt the **Architect-Builder** model:

- **You (The Architect & Reviewer)**:
    - **Plan**: Analyze requirements and create a complete, step-by-step implementation plan.
    - **Review**: Verify the work done by `llxprt` against your plan.
- **LLxprt (The Builder)**:
    - **Execute**: Takes your complete plan and executes it by writing/modifying code.

## 2. Workflow: Plan -> Delegate -> Review

```text
User Request
    ↓
[Phase 1: Architect]
    ├── Analyze Request & Codebase
    ├── Create Detailed Implementation Plan
    └── Identify Context Files (@filename)
    ↓
[Phase 2: Delegate]
    ├── Construct Prompt with FULL Plan & Context
    └── Execute `llxprt "Plan + Context"`
    ↓
[Phase 3: Reviewer]
    ├── Read Modified Files
    ├── Verify Changes Match Plan
    └── (If needed) Delegate Fixes to LLxprt
```

## 3. Delegation Protocol

When calling `llxprt`, your prompt must be a **self-contained specification**.

**Syntax:**
```bash
llxprt "
[Context]
@src/file1.ts @src/file2.ts

[Objective]
Refactor the authentication flow.

[Implementation Plan]
1. Modify 'login' function in @src/file1.ts to...
2. Update 'User' interface in @src/file2.ts to...
3. Ensure error 'X' is handled by...
"
```

## 4. Review Phase (Crucial)

After `llxprt` exits (it runs once and stops), you **MUST** verify the output.

1.  **Read Files**: Use your file reading tools to inspect the changes.
2.  **Verify**: Did it follow step 1, 2, and 3 of your plan?
3.  **Iterate**: If there are errors or missed steps, call `llxprt` again with a specific fix instruction.

## 5. Examples

### Scenario: Feature Implementation
**Architect (You)**: "I need to add a rate limiter. I'll use the 'bottleneck' library. I need to update the API client and the config."

**Delegate (Action)**:
```bash
llxprt "
Implement rate limiting for the API client.

Context: @src/api/client.ts @src/config.ts

Plan:
1. Import 'bottleneck' in @src/api/client.ts.
2. Create a limiter instance with 5 requests/second.
3. Wrap the 'get' and 'post' methods with the limiter.
4. Add 'rateLimit' option to 'ApiConfig' interface in @src/config.ts.
"
```

**Reviewer (You)**:
- Read `@src/api/client.ts` to confirm the limiter is wrapped correctly.
- Read `@src/config.ts` to check the interface update.
