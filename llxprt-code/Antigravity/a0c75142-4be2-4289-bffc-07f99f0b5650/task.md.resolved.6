# Task: Plan and Fix ASTEditTool Issues

- [x] Plan Changes <!-- id: 0 -->
    - [x] Verify [tool-error.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/core/src/tools/tool-error.ts) content
    - [x] Create [implementation_plan.md](file:///Users/caishanghong/.gemini/antigravity/brain/a0c75142-4be2-4289-bffc-07f99f0b5650/implementation_plan.md)
- [x] Execute Fixes <!-- id: 1 -->
    - [x] Implement signature extraction in [ASTQueryExtractor](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/core/src/tools/ast-edit.ts#224-407)
    - [x] Update [executePreview](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/core/src/tools/ast-edit.ts#1603-1725) to show Working Set context
    - [x] Improve Git command robustness
    - [x] Add unit tests for Freshness Check
- [x] Verify Changes <!-- id: 2 -->
    - [x] Run new unit tests
    - [x] Update snapshots
