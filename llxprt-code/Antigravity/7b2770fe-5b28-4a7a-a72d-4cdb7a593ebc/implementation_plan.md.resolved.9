# Align Height Calculation with gemini-cli Strategy

## Goal Description
Align the dynamic height calculation in [AppContainer.tsx](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/cli/src/ui/AppContainer.tsx) with the strategy used in `gemini-cli`, while accounting for `llxprt`-specific dynamic elements (`TodoPanel`). This ensures stability during LLM streaming (as `buffer` remains constant) while maintaining responsiveness during user input and panel toggling.

## User Review Required
> [!IMPORTANT]
> This change aligns with `gemini-cli` by adding `buffer` to the dependency array. It also adds `settings.merged.showTodoPanel` to support the dynamic TodoPanel. This should provide the stability of `gemini-cli` (no jitter during streaming) with the necessary responsiveness for `llxprt` features.

## Proposed Changes

### UI Layer

#### [MODIFY] [AppContainer.tsx](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-4/packages/cli/src/ui/AppContainer.tsx)
- Update `useLayoutEffect` dependency array to: `[buffer, terminalHeight, terminalWidth, settings.merged.showTodoPanel]`.
- Remove the `eslint-disable` comment.

## Verification Plan

### Manual Verification
- Verify that the UI updates correctly when typing (buffer changes).
- Verify that the UI updates correctly when toggling TodoPanel.
- Verify that the UI remains stable (no jitter) during LLM streaming (buffer constant).
