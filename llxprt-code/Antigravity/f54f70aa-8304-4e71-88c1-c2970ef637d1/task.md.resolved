# Task: Compare MCP Implementations

- [x] Explore file structure of `llxprt-code` and `llxprt-code-2` <!-- id: 0 -->
- [/] Locate MCP configuration and implementation files in both repos <!-- id: 1 -->
- [x] Compare `smart-tree` configuration in both repos <!-- id: 2 -->
- [x] Compare MCP connection and client implementation in both repos <!-- id: 3 -->
- [x] Investigate extension loading logic in `llxprt-code` vs `llxprt-code-2` <!-- id: 6 -->
- [x] Compare [createTransport](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/core/src/tools/mcp-client.ts#1186-1350) implementation in [packages/core/src/tools/mcp-client.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/core/src/tools/mcp-client.ts) <!-- id: 7 -->
- [x] Compare [recursivelyHydrateStrings](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/cli/src/config/extensions/variables.ts#45-66) in [packages/cli/src/config/extensions/variables.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/cli/src/config/extensions/variables.ts) <!-- id: 8 -->
- [x] Compare [resolveEnvVarsInObject](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/cli/src/utils/envVarResolver.ts#31-53) in [packages/cli/src/utils/envVarResolver.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/cli/src/utils/envVarResolver.ts) <!-- id: 9 -->
- [x] Check [MCPServerConfig](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/core/src/config/config.ts#203-235) definition in [packages/core/src/config/config.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/core/src/config/config.ts) <!-- id: 10 -->
- [ ] Compare [loadExtensions](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/cli/src/config/extension.ts#127-151) in [packages/cli/src/config/extension.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code/packages/cli/src/config/extension.ts) (Old vs New) <!-- id: 11 -->
- [ ] Compare [ExtensionStorage](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/cli/src/config/extension.ts#53-86) in `packages/cli/src/config/storage.ts` <!-- id: 12 -->
- [ ] Identify the cause of the issue in `llxprt-code` <!-- id: 4 -->
- [ ] Report findings to the user <!-- id: 5 -->
