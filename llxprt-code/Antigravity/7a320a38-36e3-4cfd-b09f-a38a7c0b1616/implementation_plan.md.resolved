# Fix WebFetch Signal Propagation

## Goal Description
Fix the issue where [GoogleWebFetchTool](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/core/src/tools/google-web-fetch.ts#364-422) fails to cancel the underlying network request when the tool execution is cancelled. This is caused by [fetchWithTimeout](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/core/src/utils/fetch.ts#40-59) not accepting or using the external `AbortSignal`.

## User Review Required
> [!NOTE]
> This fix involves modifying a shared utility [fetchWithTimeout](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/core/src/utils/fetch.ts#40-59). Any other consumers of this utility will need to be updated if they rely on the function signature, although the new argument will be optional.

## Proposed Changes

### Core Utils
#### [MODIFY] [fetch.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/core/src/utils/fetch.ts)
- Update [fetchWithTimeout](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/core/src/utils/fetch.ts#40-59) to accept an optional `signal: AbortSignal`.
- Logic to merge the timeout signal with the external signal (using `AbortSignal.any` if available, or a helper).
  - *Note*: Node 18+ supports `AbortSignal.any()`. If we need to support older versions, we might need a polyfill or a manual event listener approach. Assuming modern Node for this CLI tool.

### Tools
#### [MODIFY] [google-web-fetch.ts](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-2/packages/core/src/tools/google-web-fetch.ts)
- Update [executeFallback](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/core/src/tools/web-fetch.ts#119-194) to pass the `signal` to [fetchWithTimeout](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/core/src/utils/fetch.ts#40-59).

## Verification Plan

### Automated Tests
- Create a new test file `packages/core/src/utils/fetch.test.ts` (if not exists) or update it to test [fetchWithTimeout](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli/packages/core/src/utils/fetch.ts#40-59) with an external signal.
- Verify that aborting the external signal aborts the fetch.

### Manual Verification
- Run the CLI.
- Trigger a web fetch (e.g., "fetch google.com").
- Cancel the operation (Ctrl+C or UI cancel) immediately.
- Verify in logs (if possible) or by network observation that the request was aborted.
