# Debugging UI Instability in llxprt-code-4

- [x] **Problem Understanding & Code Analysis**
    - [x] Analyze changes in [llxprt-code-4](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-4) vs [main](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-4/packages/cli/src/gemini.tsx#354-1072) to identify the "Tabs" implementation.
    - [x] Locate `MainChat` and `Tabs` components in [llxprt-code-4](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-4).
    - [x] Compare `Tabs` and `MainChat` implementation with [gemini-cli](file:///Users/caishanghong/Shopify/cli-tool/gemini-cli).
- [x] **Initial Fix (Hybrid Rendering)**
    - [x] **Investigation of Infinite Loop**: Found failure with `display: none` on [VirtualizedList](file:///Users/caishanghong/Shopify/cli-tool/llxprt-code-4/packages/cli/src/ui/components/shared/VirtualizedList.tsx#67-486).
    - [x] **Implementation**: Applied hybrid strategy (Conditional for Virtualized, Visibility for Static).
    - [x] **Verification**: Passed E2E tests for Tab Cycling and Todo Verification.
- [ ] **Refining UI Stability (Regressions)**
    - [ ] **Issue 1: Tool Output Repaint**: Investigate why `pendingItems` doesn't update on tab switch. <!-- id: 12 -->
    - [ ] **Issue 2: Virtualized Scrolling**: Analyze why the "scrolling effect" is lost or conflicting with Static. <!-- id: 13 -->
    - [ ] **Issue 3: Debug Output**: Fix duplicate output and missing console logs in Debug tab. <!-- id: 14 -->
- [ ] **Final Verification**
    - [ ] Manual Check / E2E test refinement. <!-- id: 15 -->
