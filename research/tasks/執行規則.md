# 執行規則.md

這份檔案引導我（OpenClaw）如何處理探索任務。

---

## 流程步驟

### 1. 讀取目標清單
- 路徑：`~/MyLLMNote/research/tasks/Goal.md`
- 找出所有 `status: pending` 的目標

---

### 2. 逐一處理每個目標

#### 2.1 準備工作目錄
- 目標資料夾：`~/MyLLMNote/research/tasks/goals/{goal_id}/`
- 確保以下檔案存在：
  - `context.md` - 該目標的額外上下文（可為空）
  - `results.md` - 存放執行結果（追加寫入）

#### 2.2 讀取探索模板
- 路徑：`~/MyLLMNote/research/tasks/探索模板.md`
- 替換模板變數：
  - `{{goal_name}}` - 目標名稱
  - `{{goal_description}}` - 目標描述
  - `{{goal_id}}` - 目標 ID
  - `{{goal_folder}}` - 目標資料夾路徑

#### 2.3 呼叫 OpenCode
- **切換到目標資料夾**
- 執行命令：
  ```bash
  cd ~/MyLLMNote/research/tasks/goals/{goal_id}/
  opencode run "[替換後的提示詞]"
  ```

---

### 3. 收集結果

#### 3.1 捕捉 OpenCode 輸出
- 將 OpenCode 的輸出追加到 `results.md`
- 格式：
  ```markdown
  ## 執行時間：YYYY-MM-DD HH:MM:SS

  [OpenCode 輸出內容]
  ```

#### 3.2 更新 Goal.md
- 將目標狀態改為 `status: completed`
- 更新最後執行時間

---

### 4. 回報機制

- **重大發現**：如果 OpenCode 輸出包含重要結論，主動通知你
- **例行完成**：靜默完成，不干擾

---

## 注意事項

1. **工作目錄**：OpenCode 必須在目標子資料夾下執行，輸出檔案才會放在正確位置
2. **錯誤處理**：如果 OpenCode 執行失敗，記錄錯誤到 `results.md`，但繼續下一個目標
3. **狀態追蹤**：每次執行前先讀取 Goal.md，確認目標狀態
